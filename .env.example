# .env.example
# Exemple commenté du fichier .env utilisé par pivot_tracked_and_stage.py
# Copiez ce fichier en `.env` puis remplissez les valeurs réelles avant d'exécuter le script.
# NE PAS pousser le fichier `.env` vers un dépôt public. Gardez les tokens hors du repo.

# ------------------ DHIS2 API (général) ------------------
# URL de base de l'API DHIS2 (ex : https://dhis2.example.org/hmis-events/api/29)
PIVOT_BASE_URL=https://dhis2.example.org/hmis-events/api/29

# Token d'accès (Personal Access Token)
# Remplacez par votre token local ; NE PAS partager
PIVOT_TOKEN=d2pat_XXXXX

# UID du programme DHIS2 à traiter (ex: LlrP8fstjfM)
DOWNLOAD_PROGRAM=PROGRAM_UID_HERE

# ------------------ download.py (events) ------------------
# Endpoint complet optionnel (si vous préférez pointer directement vers events.csv)
DOWNLOAD_BASE_URL=https://dhis2.example.org/hmis-events/api/events.csv
# Token pour download.py (peut être identique à PIVOT_TOKEN)
DOWNLOAD_TOKEN=d2pat_XXXXX
# Fichier de sortie local pour les events (par défaut localisé dans data/)
DOWNLOAD_OUTPUT=data/data.csv
# Paramètres optionnels pour filtrer la requête events
DOWNLOAD_ORG_UNIT=ORG_UNIT_UID_OR_EMPTY
DOWNLOAD_PROGRAM=PROGRAM_UID_HERE
DOWNLOAD_PROGRAM_STAGE=PROGRAM_STAGE_UID_OR_EMPTY
DOWNLOAD_START_DATE=2025-10-12
DOWNLOAD_END_DATE=2026-01-12
DOWNLOAD_OU_MODE=DESCENDANTS
DOWNLOAD_SKIP_PAGING=true
DOWNLOAD_LINKS=false
DOWNLOAD_INCLUDE_DELETED=false
DOWNLOAD_DATA_ELEMENT_ID_SCHEME=UID
DOWNLOAD_ORG_UNIT_ID_SCHEME=UID
DOWNLOAD_ID_SCHEME=UID
DOWNLOAD_ATTACHMENT=events.csv
DOWNLOAD_FORMAT=csv

# ------------------ download_tracked.py (trackedEntityInstances) ------------------
TRACKED_BASE_URL=https://dhis2.example.org/hmis-events/api/trackedEntityInstances.csv
# Fichier de sortie local pour les tracked entities
TRACKED_OUTPUT=data/trackedEntityInstances.csv
TRACKED_OU_MODE=ALL
TRACKED_FORMAT=csv
TRACKED_INCLUDE_DELETED=false
TRACKED_INCLUDE_ALL_ATTRIBUTES=false
TRACKED_DATA_ELEMENT_ID_SCHEME=UID
TRACKED_EVENT_ID_SCHEME=UID
TRACKED_ORG_UNIT_ID_SCHEME=UID
TRACKED_ID_SCHEME=UID
TRACKED_ATTACHMENT=trackedEntityInstances.csv
TRACKED_PROGRAM=PROGRAM_UID_HERE
TRACKED_FOLLOW_UP_STATUS=ALL
TRACKED_PROGRAM_START_DATE=2025-10-17
TRACKED_PROGRAM_END_DATE=2026-01-17

# ------------------ Fichiers locaux (entrée/sortie) ------------------
# Chemin relatif vers l'export trackedEntityInstances (utilisé par le script)
TRACKED_OUTPUT=data/trackedEntityInstances.csv
# Chemin relatif vers l'export events / program stages
PIVOT_INPUT=data/data.csv
# Chemin relatif vers le fichier Excel final
MERGED_PIVOT_OUTPUT=output/pivot_tracked_and_stage.xlsx

# ------------------ Options générales ------------------
# Fonction d'agrégation pandas utilisée pour les pivots : first|last|sum|max|min
PIVOT_AGGFUNC=first

# Fichiers utilitaires / cache
PIVOT_MAPPING_FILE=utils/dataelement_mapping.json
PIVOT_STATE_FILE=utils/progress_state.json
